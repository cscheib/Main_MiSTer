---

name: ci-workflow
on: [push, pull_request]

jobs:
  build: 
    name: build job
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - uses: docker://dockcross/linux-armv7
      with:
        args: make BASE='armv7-unknown-linux-gnueabi'
    - uses: actions/upload-artifact@master
      with:
        name: MiSTer-${{ github.sha }}
        path: ./MiSTer
    - uses: actions/upload-artifact@master
      with:
        name: mister-build-tree
        path: .
    # - name: Dump GitHub context
    #   env:
    #     GITHUB_CONTEXT: ${{ toJson(github) }}
    #   run: echo "$GITHUB_CONTEXT"
    # - name: Dump job context
    #   env:
    #     JOB_CONTEXT: ${{ toJson(job) }}
    #   run: echo "$JOB_CONTEXT"
    # - name: Dump steps context
    #   env:
    #     STEPS_CONTEXT: ${{ toJson(steps) }}
    #   run: echo "$STEPS_CONTEXT"
    # - name: Dump runner context
    #   env:
    #     RUNNER_CONTEXT: ${{ toJson(runner) }}
    #   run: echo "$RUNNER_CONTEXT"
    # - name: Dump strategy context
    #   env:
    #     STRATEGY_CONTEXT: ${{ toJson(strategy) }}
    #   run: echo "$STRATEGY_CONTEXT"
    # - name: Dump matrix context
    #   env:
    #     MATRIX_CONTEXT: ${{ toJson(matrix) }}
    #   run: echo "$MATRIX_CONTEXT"
    - name: ${{ github.event.head_commit.timestamp }}
      run: echo ${{ github.event.head_commit.timestamp }}
